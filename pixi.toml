[project]
channels = ["conda-forge"]
description = "(Real Embedded) Algebraic Number Theory"
name = "e-antic"
platforms = ["linux-64", "osx-64"]

[environments]
libeantic-flint-26 = ["libeantic", "flint-26"]
libeantic-flint-27 = ["libeantic", "flint-27"]
libeantic-flint-28 = ["libeantic", "flint-28"]
libeantic-flint-29 = ["libeantic", "flint-29"]
pyeantic-sagemath-92 = ["pyeantic", "sagemath-92"]
pyeantic-sagemath-93 = ["pyeantic", "sagemath-93"]
pyeantic-sagemath-94 = ["pyeantic", "sagemath-94"]
pyeantic-sagemath-95 = ["pyeantic", "sagemath-95"]
pyeantic-sagemath-96 = ["pyeantic", "sagemath-96"]
pyeantic-sagemath-97 = ["pyeantic", "sagemath-97"]
pyeantic-sagemath-98 = ["pyeantic", "sagemath-98"]
pyeantic-sagemath-100 = ["pyeantic", "sagemath-100"]
pyeantic-sagemath-101 = ["pyeantic", "sagemath-101"]
pyeantic-sagemath-102 = ["pyeantic", "sagemath-102"]
pyeantic-sagemath-103 = ["pyeantic", "sagemath-103"]
doc = []
dev = ["dev", "libeantic", "pyeantic", "sagemath-103", "doc"]

[tasks]
bootstrap = { cmd = "./bootstrap", inputs = ["**/*.ac"], outputs = ["configure", "libeantic/configure", "pyeantic/configure", "doc/configure"] }

[feature.libeantic.tasks]
libeantic-configure = { cmd = "./configure --without-benchmark --without-byexample", cwd = "libeantic", depends-on = ["bootstrap"], inputs = ["configure", "**/*.in"] }
libeantic-build = { cmd = "make", cwd = "libeantic", depends-on = ["libeantic-configure"], env = { MAKEFLAGS = "-j$(nproc)" } }
libeantic-check = { cmd = "make check", cwd = "libeantic", depends-on = ["libeantic-build"], env = { MAKEFLAGS = "-j$(nproc)" } }
pyeantic-configure = { cmd = "./configure --without-sage", cwd = "pyeantic", depends-on = ["bootstrap"], inputs = ["configure", "**/*.in"] }
pyeantic-check = { cmd = "make check", cwd = "pyeantic", depends-on = ["pyeantic-configure", "libeantic-build"], env = { MAKEFLAGS = "-j$(nproc)" } }

[feature.dev.tasks]
build = "pixi run libeantic-build"
test = "pixi run libeantic-check && pixi run pyeantic-check"
distcheck = { cmd = "./configure && make distcheck", depends-on = ["bootstrap"], env = { MAKEFLAGS = "-j$(nproc)" } }

[dependencies]
automake = "*"
make = "*"
libtool = "*"
coreutils = "*"

[feature.libeantic.dependencies]
c-compiler = "*"
cxx-compiler = "*"
gmp = "*"
libflint = "*"
boost-cpp = "*"
# benchmark = "*"
# byexample = ">=10.4"
# cppyy = ">=3,<4"
# py = "*"

[feature.pyeantic.dependencies]
python = "*"
cppyy = "*"
cppyythonizations = "*"
pytest = "*"
setuptools = "*"

[feature.pyeantic.pypi-dependencies]
pyeantic = { path = "pyeantic/src", editable = true }

[feature.doc.dependencies]
sphinx = "*"
standardese = "*"
mkdocs = "*"

[feature.dev.dependencies]
libflint = "3.*"
benchmark = "*"
byexample = "*"

[feature.flint-26.dependencies]
libflint = "2.6"

[feature.flint-27.dependencies]
libflint = "2.7"

[feature.flint-28.dependencies]
libflint = "2.8"

[feature.flint-29.dependencies]
libflint = "2.9"

[feature.sagemath-92]
[feature.sagemath-93]
[feature.sagemath-94]
[feature.sagemath-95]
[feature.sagemath-96]
[feature.sagemath-97]
[feature.sagemath-98]
[feature.sagemath-100]
[feature.sagemath-101]
[feature.sagemath-102]
[feature.sagemath-103.dependencies]
gmpxxyy = "*"
sagelib = "10.3"
